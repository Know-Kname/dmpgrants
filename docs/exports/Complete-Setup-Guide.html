<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Setup Guide</title>
    <style>
        @page { margin: 2cm; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            color: #1f2937;
        }
        h1 {
            color: #0ea5e9;
            border-bottom: 3px solid #0ea5e9;
            padding-bottom: 10px;
            font-size: 2.5em;
        }
        h2 {
            color: #0369a1;
            margin-top: 30px;
            font-size: 1.8em;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 5px;
        }
        h3 {
            color: #075985;
            margin-top: 20px;
            font-size: 1.4em;
        }
        pre, code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        pre {
            padding: 15px;
            overflow-x: auto;
            border-left: 4px solid #0ea5e9;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #d1d5db;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f3f4f6;
            font-weight: bold;
        }
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #0ea5e9;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        blockquote {
            border-left: 4px solid #d1d5db;
            margin: 20px 0;
            padding-left: 20px;
            color: #6b7280;
            font-style: italic;
        }
        hr {
            border: none;
            border-top: 2px solid #e5e7eb;
            margin: 40px 0;
        }
        @media print {
            body { padding: 0; }
            h1 { page-break-before: always; }
            h1:first-child { page-break-before: avoid; }
        }
    </style>
</head>
<body>
<pre style="white-space: pre-wrap;">
# Detroit Memorial Park - Setup Guide

## Quick Start Guide

This guide will help you get the Cemetery Management System up and running.

---

## Prerequisites

Make sure you have the following installed:
- **Node.js** (v18 or higher) - [Download](https://nodejs.org/)
- **PostgreSQL** (v14 or higher) - [Download](https://www.postgresql.org/download/)
- **Git** - [Download](https://git-scm.com/)

---

## Step 1: Clone the Repository

If you haven't already, clone the repository:

```bash
git clone <your-repo-url>
cd dmpgrants
```

---

## Step 2: Install Dependencies

Install all required Node.js packages:

```bash
npm install
```

This will install all frontend and backend dependencies listed in `package.json`.

---

## Step 3: Set Up PostgreSQL Database

### Create Database

1. Open PostgreSQL terminal or pgAdmin
2. Create a new database:

```sql
CREATE DATABASE dmp_cemetery;
```

3. Create a user (optional, or use existing user):

```sql
CREATE USER dmp_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE dmp_cemetery TO dmp_user;
```

---

## Step 4: Configure Environment Variables

1. Copy the example environment file:

```bash
cp .env.example .env
```

2. Edit `.env` file with your database credentials:

```env
DATABASE_URL=postgresql://dmp_user:your_secure_password@localhost:5432/dmp_cemetery
JWT_SECRET=change-this-to-a-random-secret-key
PORT=3000
NODE_ENV=development
```

**Important:** Change `JWT_SECRET` to a random, secure string!

---

## Step 5: Run Database Migration

Initialize the database with all required tables:

```bash
npm run db:migrate
```

This will:
- Create all database tables (users, work orders, inventory, etc.)
- Set up indexes for performance
- Create a default admin user

### Default Login Credentials
- **Email:** admin@dmp.com
- **Password:** admin123

**‚ö†Ô∏è IMPORTANT:** Change the admin password immediately after first login!

---

## Step 6: Start the Application

You'll need to run two servers (in separate terminal windows):

### Terminal 1: Start Backend Server

```bash
npm run server
```

The API server will start on `http://localhost:3000`

### Terminal 2: Start Frontend Development Server

```bash
npm run dev
```

The frontend will start on `http://localhost:5173`

---

## Step 7: Access the Application

1. Open your browser and navigate to:
   ```
   http://localhost:5173
   ```

2. Log in with default credentials:
   - Email: `admin@dmp.com`
   - Password: `admin123`

3. You should see the Dashboard!

---

## Common Issues & Solutions

### Issue: "Cannot connect to database"

**Solution:**
- Ensure PostgreSQL is running
- Check your DATABASE_URL in `.env`
- Verify database exists: `psql -l`

### Issue: "Port 3000 already in use"

**Solution:**
- Kill the process using port 3000:
  ```bash
  # On Mac/Linux
  lsof -ti:3000 | xargs kill -9

  # On Windows
  netstat -ano | findstr :3000
  taskkill /PID <PID> /F
  ```
- Or change PORT in `.env` to another number

### Issue: "Module not found" errors

**Solution:**
- Delete node_modules and reinstall:
  ```bash
  rm -rf node_modules
  npm install
  ```

### Issue: "Database migration failed"

**Solution:**
- Drop and recreate database:
  ```sql
  DROP DATABASE dmp_cemetery;
  CREATE DATABASE dmp_cemetery;
  ```
- Run migration again: `npm run db:migrate`

---

## Next Steps After Setup

### 1. Change Admin Password
- Go to User Settings (future feature) or update directly in database

### 2. Create Additional Users
- Use the API endpoint `/api/auth/register` or add feature in UI

### 3. Start Adding Data
- **Customers** - Add your cemetery clients
- **Vendors** - Add suppliers for inventory
- **Inventory** - Add caskets, urns, vaults, markers
- **Work Orders** - Create maintenance tasks
- **Burials** - Record burial information
- **Contracts** - Manage pre-need and at-need contracts
- **Grants** - Track funding opportunities

### 4. Customize Settings
- Update company name and logo (future feature)
- Configure email notifications (future feature)
- Set up automated backups

---

## Development Commands

```bash
# Install dependencies
npm install

# Run database migration
npm run db:migrate

# Start backend server (port 3000)
npm run server

# Start frontend dev server (port 5173)
npm run dev

# Build for production
npm run build

# Preview production build
npm run preview
```

---

## Production Deployment

### Option 1: Traditional Server

1. **Build the application:**
   ```bash
   npm run build
   ```

2. **Set up PostgreSQL on production server**

3. **Update environment variables:**
   ```env
   DATABASE_URL=your_production_database_url
   JWT_SECRET=your_production_secret
   NODE_ENV=production
   ```

4. **Run migration:**
   ```bash
   npm run db:migrate
   ```

5. **Start the server:**
   ```bash
   npm run server
   ```

6. **Serve the built frontend with nginx or similar**

### Option 2: Cloud Platforms

- **Heroku:** Follow Heroku Node.js deployment guide
- **AWS:** Use EC2 + RDS or Elastic Beanstalk
- **Digital Ocean:** App Platform or Droplet
- **Vercel/Netlify:** Frontend only, API separate

---

## Database Backup

### Manual Backup

```bash
pg_dump dmp_cemetery > backup_$(date +%Y%m%d).sql
```

### Restore from Backup

```bash
psql dmp_cemetery < backup_20250101.sql
```

### Automated Backups (Recommended)

Set up a cron job for daily backups:

```bash
# Edit crontab
crontab -e

# Add this line for daily 2 AM backup
0 2 * * * pg_dump dmp_cemetery > /path/to/backups/dmp_$(date +\%Y\%m\%d).sql
```

---

## Security Best Practices

1. **Change default credentials** immediately
2. **Use strong JWT_SECRET** (32+ random characters)
3. **Enable HTTPS** in production
4. **Regular database backups**
5. **Keep dependencies updated:** `npm audit fix`
6. **Limit database user permissions** to only what's needed
7. **Enable firewall** and restrict database access
8. **Regular security audits**

---

## Getting Help

### Documentation
- See `claude.md` for technical details
- See `NOTION_VS_CUSTOM.md` for platform comparison
- Check `README.md` for quick reference

### Support
- Email: support@yourdomain.com (configure this)
- Create an issue in the repository
- Contact the development team

---

## Feature Roadmap

### Coming Soon
- [ ] User management UI
- [ ] Advanced reporting dashboard
- [ ] Email notifications
- [ ] Document upload and storage
- [ ] Cemetery plot map visualization
- [ ] Mobile app
- [ ] Integration with cemsites data
- [ ] Automated payment reminders

### Future Enhancements
- [ ] Public-facing website integration
- [ ] Online payment processing
- [ ] SMS notifications
- [ ] Advanced analytics
- [ ] Multi-cemetery support

---

## Congratulations! üéâ

Your Cemetery Management System is now up and running!

Start by:
1. Logging in with admin credentials
2. Exploring the Dashboard
3. Adding your first customer
4. Creating a work order
5. Recording inventory items

The system is designed to grow with your needs. Add data gradually and customize as you go.

For questions or support, reach out to your development team.
</pre>
<hr>
<p style="text-align: center; color: #6b7280; margin-top: 40px;">
    <strong>Detroit Memorial Park Cemetery Management System</strong><br>
    ¬© 2025 | Version 1.0.0
</p>
</body>
</html>
